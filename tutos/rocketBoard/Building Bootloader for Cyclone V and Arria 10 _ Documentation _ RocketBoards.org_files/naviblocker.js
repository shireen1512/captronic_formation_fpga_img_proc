"use strict";!function(e){var i={formElements:"textarea, input[type='text'], select"};function t(t,n){var r=this;r.elem=e(t),r.opts=e.extend({},i,n),r.elem.is("form")?r.init():console.error("NaviBlocker: element is not a form: ",t)}t.prototype.init=function(){var i=this;i.initialForm=i.serialize(),i.elem.on("refresh",(function(){i.initialForm=i.serialize()})),e(window).on("beforeunload",(function(e){if(i.hasChanged())return e.preventDefault(),"Are you sure?"}))},t.prototype.hasChanged=function(){var e=this;return!!document.body.contains(e.elem[0])&&!(!e.elem.is(":visible")||e.initialForm===e.serialize())},t.prototype.serialize=function(){return this.elem.find(this.opts.formElements).fieldSerialize()},e.fn.naviBlocker=function(i){return this.each((function(){e.data(this,"NaviBlocker")||e.data(this,"NaviBlocker",new t(this,i))}))},e((function(){e(".naviBlocker").livequery((function(){e(this).naviBlocker()}))}))}(jQuery);
